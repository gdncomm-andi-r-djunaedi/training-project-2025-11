spring.application.name=blibligatway
server.port=8093


# Gateway Routes Configuration

# Auth Service Route (Login - LoginResponse filter to transform response)
spring.cloud.gateway.routes[0].id=member-login
spring.cloud.gateway.routes[0].uri=http://localhost:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/login
spring.cloud.gateway.routes[0].filters[0]=RewritePath=/api/auth/login, /api/members/authenticate
spring.cloud.gateway.routes[0].filters[1]=LoginResponse

# Member Service Route (Register - no Auth filter needed)
spring.cloud.gateway.routes[1].id=member-register
spring.cloud.gateway.routes[1].uri=http://localhost:8081
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/members/register

# Member Service Route (Authenticate - no Auth filter needed, but LoginResponse filter to transform response)
spring.cloud.gateway.routes[2].id=member-authenticate
spring.cloud.gateway.routes[2].uri=http://localhost:8081
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/members/authenticate
spring.cloud.gateway.routes[2].filters[0]=LoginResponse

# Logout Route (handled by gateway, no backend service needed - Logout filter returns response directly)
spring.cloud.gateway.routes[3].id=logout
spring.cloud.gateway.routes[3].uri=http://httpbin.org:80
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/auth/logout
spring.cloud.gateway.routes[3].filters[0]=Logout

# Refresh Token Route (handled by gateway - RefreshToken filter generates new tokens)
spring.cloud.gateway.routes[4].id=refresh-token
spring.cloud.gateway.routes[4].uri=http://httpbin.org:80
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/auth/refresh
spring.cloud.gateway.routes[4].filters[0]=RefreshToken

# Member Service Route (other endpoints - with Auth filter)
spring.cloud.gateway.routes[5].id=member
spring.cloud.gateway.routes[5].uri=http://localhost:8081
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/members/**
spring.cloud.gateway.routes[5].filters[0]=Auth

# Product Service Route
spring.cloud.gateway.routes[6].id=product
spring.cloud.gateway.routes[6].uri=http://localhost:8082
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/products/**

# Cart Service Route (with Auth filter)
spring.cloud.gateway.routes[7].id=cart
spring.cloud.gateway.routes[7].uri=http://localhost:8084
spring.cloud.gateway.routes[7].predicates[0]=Path=/api/cart/**
spring.cloud.gateway.routes[7].filters[0]=Auth

# Search Service Route
spring.cloud.gateway.routes[8].id=search
spring.cloud.gateway.routes[8].uri=http://localhost:8083
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/search/**



# JWT Configuration
jwt.secret=aVeryLongAndSecureBase64EncodedSecretKeyForHS256AndTheSecretMustBeAtLeast32Bytes
# JWT expiration: 1 hour (in milliseconds)
jwt.expiration=36000000
# Refresh token expiration: 7 days (in milliseconds)
jwt.refresh-expiration=604800000
# Cookie secure flag (set to true in production with HTTPS)
jwt.cookie.secure=false

# Gateway Security Configuration
# Shared secret between gateway and services to verify requests came from gateway
gateway.secret=GatewaySecretKeyForServiceVerification2024
gateway.signature.header=X-Gateway-Signature
