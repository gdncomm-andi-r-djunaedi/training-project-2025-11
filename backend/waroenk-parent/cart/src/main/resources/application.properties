info.app.version=@project.version@
spring.application.name=@project.artifactId@
server.port=${HTTP_REST_PORT:8082}
springdoc.api-docs.path=/api-docs
springdoc.api-docs.swagger-ui=/swagger-ui

# gRPC Configuration
grpc.server.port=${GRPC_SERVER_PORT:9092}
grpc.server.address=0.0.0.0
grpc.transcoding.enabled=true
# Allow clients to send keepalive pings more frequently (default is 5 min)
grpc.server.permit-keep-alive-time=30s
grpc.server.permit-keep-alive-without-calls=true
grpc.server.keep-alive-time=60s
grpc.server.keep-alive-timeout=20s
grpc.client.cart-service.address=static://localhost:9092
grpc.client.cart-service.negotiation-type=plaintext
grpc.client.catalog-service.address=static://localhost:9091
grpc.client.catalog-service.negotiation-type=plaintext
grpc.client.member-service.address=static://localhost:9090
grpc.client.member-service.negotiation-type=plaintext

# MongoDB Configuration
# For local dev without auth: mongodb://localhost:27017/cart
# For Docker with auth: mongodb://admin:admin@mongodb:27017/cart?authSource=admin
spring.data.mongodb.uri=${MONGODB_URI:mongodb://admin:admin@localhost:27017/cart?authSource=admin}
spring.data.mongodb.auto-index-creation=true

# ===========================================
# Redis Configuration (Standalone or Sentinel)
# ===========================================
# Default: Standalone mode (for local development)
# To enable Sentinel: set REDIS_SENTINEL_MASTER and REDIS_SENTINEL_NODES env vars

# Standalone Redis config (used when Sentinel is not configured)
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.database=${REDIS_DATABASE:0}
spring.data.redis.password=${REDIS_PASSWORD:}

# Lettuce client pool config
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.timeout=2000ms

# Default pagination
default.item-per-page=10

# Cart/Checkout Configuration
cart.checkout.ttl-seconds=${CHECKOUT_TTL_SECONDS:900}
cart.checkout.use-redis=${CHECKOUT_USE_REDIS:true}

# Mongock Migration
mongock.enabled=true
mongock.change-logs-scan-package=com.gdn.project.waroenk.cart.migration

# ===========================================
# API Gateway Registration (CI/CD Friendly)
# ===========================================
# Registration is ENABLED by default (uses upsert - safe to always run)
# Set to 'false' to disable registration (e.g., for isolated local testing)
gateway.registration.enabled=${GATEWAY_REGISTRATION_ENABLED:true}
# API Gateway host (use service name in Docker, hostname locally)
gateway.host=${GATEWAY_HOST:api-gateway}
# API Gateway gRPC port for registration
gateway.grpc.port=${GATEWAY_GRPC_PORT:6565}
