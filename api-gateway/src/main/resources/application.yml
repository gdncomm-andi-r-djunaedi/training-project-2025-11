server:
  port: 8080

gateway:
  routes:
    - id: member
      pathPrefix: /api/members
      targetBaseUrl: http://localhost:8081
      targetPathPrefix: /api/members
      requiresAuth: false

    - id: product
      pathPrefix: /api/products
      targetBaseUrl: http://localhost:8082
      targetPathPrefix: /api/products
      requiresAuth: false

    - id: cart
      pathPrefix: /api/cart
      targetBaseUrl: http://localhost:8083
      targetPathPrefix: /api/cart
      requiresAuth: true

  jwt:
    secret: change-this-secret-change-this-secret-1234
    ttlSeconds: 3600

  security:
    public-paths:
      - /swagger-ui/**
      - /v3/api-docs/**
      - /api/members/register
      - /api/members/login
      - /api/products/**

    authenticated-paths:
      - /api/cart/**
      - /api/members/logout

  cors:
    mappings:
      - pathPattern: "/api/**"
        allowedOrigins:
          - "http://localhost:3000"
        allowedMethods:
          - "GET"
          - "POST"
          - "PUT"
          - "DELETE"
          - "OPTIONS"
        allowedHeaders:
          - "*"
        exposedHeaders:
          - "X-Total-Count"
        allowCredentials: true
        maxAge: 3600

  rate-limit:
    rules:
      - pathPattern: "/api/members/login"
        requests: 10
        windowSeconds: 60
      - pathPattern: "/api/cart/**"
        requests: 50
        windowSeconds: 60

springdoc:
  swagger-ui:
    path: /swagger-ui.html