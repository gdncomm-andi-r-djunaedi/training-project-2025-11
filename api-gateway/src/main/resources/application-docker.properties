# API Gateway Configuration - Docker Profile
# Server Configuration
server.port=${SERVER_PORT:8080}
# Application Name
spring.application.name=api-gateway
# JWT Configuration
jwt.secret=${JWT_SECRET}
jwt.expiration=86400000
# Redis Configuration
spring.data.redis.host=${REDIS_HOST:redis}
spring.data.redis.port=${REDIS_PORT:6379}
# Spring Cloud Gateway Routes (use container hostnames)
spring.cloud.gateway.routes[0].id=member-service
spring.cloud.gateway.routes[0].uri=${MEMBER_SERVICE_URL:http://member-service:8081}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/member/**
# Internal Service URLs (for WebClient)
services.member.url=${MEMBER_SERVICE_URL:http://member-service:8081}
spring.cloud.gateway.routes[1].id=product-service
spring.cloud.gateway.routes[1].uri=${PRODUCT_SERVICE_URL:http://product-service:8082}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/product/**
spring.cloud.gateway.routes[2].id=cart-service
spring.cloud.gateway.routes[2].uri=${CART_SERVICE_URL:http://cart-service:8083}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/cart/**
spring.cloud.gateway.routes[2].filters[0]=JwtAuthenticationFilter
spring.cloud.gateway.routes[3].id=auth-login
spring.cloud.gateway.routes[3].uri=lb://api-gateway
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/auth/**
# Rate Limiting Configuration
ratelimit.enabled=true
ratelimit.requests-per-minute=1000
# Logging Configuration
logging.level.root=INFO
logging.level.com.marketplace.gateway=INFO
logging.level.org.springframework.cloud.gateway=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%X{correlationId:-}] - %logger{36} - %msg%n
# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus,gateway
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true
